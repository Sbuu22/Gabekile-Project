<!DOCTYPE html>
<html lang="en">


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GABEKILE Projects Portfolio</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="logo/logo.png" sizes="32x32">
<link rel="shortcut icon" href="logo/logo.png"> 

    
<style>
    /* ========================================================
BASE & VARIABLES ()
======================================================== */
    :root {
        --brand-primary: #0f1720;
        --brand-accent: #ff7a00;
        --bg-light: #f4f4f9;
        --text-dark: #1e1e1e;
        --text-light: #cccccc;
        --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        --radius: 4px;
        --font-inter: 'Inter', sans-serif;
        --transition-speed: 0.3s;
        --brand-yellow: #ffb300;
        --brand-dark: #0f1720;
        --brand-accent: #ff7a00;
        --text-color: #1e1e1e;

    }

    body {
        font-family: var(--font-inter);
        color: var(--text-dark);
        margin: 0;
        background-color: var(--bg-light);
        line-height: 1.6;
    }

    /* Helper Classes */
    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    .section-title {
        text-align: center;
        font-size: 2.5em;
        color: var(--brand-primary);
        margin-bottom: 10px;
        font-weight: 800;
    }

    .section-intro {
        text-align: center;
        font-size: 1.1em;
        color: #666;
        margin-bottom: 40px;
    }

    /* New class to disable background scroll when modal is open */
    .no-scroll {
        overflow: hidden !important;
    }

    /* ========================================================
WATERMARK BACKGROUND (Flawless Fix: Logo Image Watermark)
======================================================== */
    #watermark-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background-color: var(--bg-light);
        opacity: 1;
        background-image: url('logo/logo.png');
        background-repeat: no-repeat;
        background-position: center center;
        background-size: 80vh;
        opacity: 0.05;
        content: none;
    }

    /* ========================================================
HEADER & NAVIGATION
======================================================== */
    header {
        background-color: var(--brand-dark);
        color: white;
        padding-top: 20px;
        transition: all 0.3s ease;
        /* Smooth transition for shrinking */
    }

    /* Class applied by JavaScript when scrolled */
    header.scrolled {
        padding-top: 5px;
        padding-bottom: 5px;
        background-color: var(--brand-dark);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    header.scrolled .brand-title {
        font-size: 16px;
    }

    header.scrolled .brand-tagline {
        display: none;
    }

    header.scrolled .logo {
        width: 30px;
        height: 30px;
        font-size: 18px;
    }

    header.scrolled .topbar {
        padding: 5px 0;
    }

    .topbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
    }

    .brand {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .logo {
        width: 40px;
        height: 40px;
        background-color: var(--brand-yellow);
        color: var(--brand-dark);
        font-weight: 800;
        font-size: 24px;
        border-radius: var(--radius);
        display: flex;
        justify-content: center;
        align-items: center;
        text-decoration: none;
    }

    .brand-title {
        font-weight: 800;
        font-size: 18px;
    }

    .brand-tagline {
        color: rgba(255, 255, 255, 0.8);
        font-size: 13px;
    }

    #navbar ul {
        list-style: none;
        display: flex;
        gap: 20px;
    }

    #navbar a {
        color: white;
        text-decoration: none;
        padding: 5px 0;
        transition: color 0.3s;
    }

    #navbar a:hover {
        color: var(--brand-yellow);
    }

    .menu-toggle {
        display: none;
        background: none;
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
    }

    /* ========================================================
NEW FEATURE: FEATURED PROJECT BANNER STYLING
======================================================== */
    .featured-banner {
        /* Use MGT project image as background */
        background-image: url('images/1.jpg');
        background-size: cover;
        background-position: center;
        background-attachment: scroll;
        /* Use 'fixed' for a more dramatic effect */
        height: 350px;
        /* Define a clear height for the banner */
        border-radius: var(--radius);
        margin-bottom: 50px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .featured-content {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        /* Gradient overlay for text readability */
        background: linear-gradient(to top, rgba(0, 0, 0, 0.85) 0%, rgba(0, 0, 0, 0) 100%);
        padding: 40px;
        padding-top: 100px;
        /* Push content away from the top of the gradient */
        color: white;
    }

    .featured-content h2 {
        font-size: 2.5em;
        margin: 0;
        color: white;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
        font-weight: 800;
    }

    .featured-content p {
        font-size: 1.1em;
        margin-top: 5px;
        margin-bottom: 20px;
        max-width: 600px;
    }

    .featured-tag {
        display: inline-block;
        background-color: var(--brand-accent);
        color: var(--brand-primary);
        padding: 5px 10px;
        border-radius: 3px;
        font-weight: 700;
        font-size: 0.8em;
        letter-spacing: 1px;
        margin-bottom: 10px;
    }

    .view-details-btn {
        background-color: var(--brand-accent);
        color: var(--brand-primary);
        border: none;
        padding: 10px 20px;
        border-radius: 50px;
        cursor: pointer;
        font-weight: 700;
        font-size: 1em;
        transition: background-color 0.3s, transform 0.3s;
    }

    .view-details-btn:hover {
        background-color: white;
        transform: translateY(-2px);
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .featured-banner {
            height: 250px;
            margin-bottom: 30px;
        }

        .featured-content {
            padding: 20px;
            padding-top: 80px;
        }

        .featured-content h2 {
            font-size: 1.8em;
        }
    }

    /* ========================================================
PORTFOLIO MAIN SECTION
======================================================== */
    #portfolio-section {
        padding: 80px 0;
    }

    /* NEW: Filter and Search container */
    .portfolio-controls {
        display: flex;
        flex-direction: column;
        gap: 20px;
        margin-bottom: 50px;
        align-items: center;
    }

    #projectSearch {
        width: 100%;
        max-width: 400px;
        padding: 12px 20px;
        border: 2px solid var(--text-light);
        border-radius: var(--radius);
        font-size: 1em;
        transition: border-color 0.3s, box-shadow 0.3s;
        box-shadow: var(--shadow);
    }

    #projectSearch:focus {
        outline: none;
        border-color: var(--brand-accent);
        box-shadow: 0 0 0 3px rgba(255, 122, 0, 0.2);
    }

    /* Filter Buttons - Clean, Professional Style */
    .portfolio-filters {
        text-align: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }

    .filter-btn {
        background-color: var(--bg-light);
        border: 2px solid var(--text-light);
        color: var(--text-dark);
        padding: 10px 20px;
        margin: 5px;
        border-radius: var(--radius);
        cursor: pointer;
        font-weight: 600;
        transition: background-color 0.3s, border-color 0.3s, color 0.3s, box-shadow 0.3s;
        white-space: nowrap;
    }

    .filter-btn:hover {
        border-color: var(--brand-accent);
        color: var(--brand-accent);
    }

    .filter-btn.active {
        background-color: var(--brand-primary);
        border-color: var(--brand-primary);
        color: white;
        box-shadow: var(--shadow);
    }

    /* Project Grid */
    .project-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
    }

    .project-item {
        position: relative;
        overflow: hidden;
        border-radius: var(--radius);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        cursor: pointer;
        border: 1px solid #eee;
    }

    .project-item img {
        width: 100%;
        height: 280px;
        object-fit: cover;
        display: block;
        transition: transform 0.4s ease, opacity 0.4s ease;
    }

    /* Overlay for details */
    .project-details {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: transparent;
        color: white;
        padding: 20px;
        transition: padding 0.4s ease, background 0.4s ease;
        min-height: 80px;
        display: flex;
        align-items: flex-end;
    }

    .project-details h3 {
        margin: 0;
        font-size: 1.4em;
        color: white;
        font-weight: 600;
        text-shadow: 0 0 5px rgba(0, 0, 0, 0.8), 0 0 10px rgba(0, 0, 0, 0.5);
        border-bottom: 2px solid var(--brand-accent);
        padding-bottom: 5px;
        transition: border-color 0.4s ease;
    }

    /* Hide all secondary text/description elements */
    .project-details p {
        display: none !important;
    }

    /* Hover effect: Zoom image and increase overlay visibility/padding */
    .project-item:hover img {
        transform: scale(1.03);
        opacity: 0.95;
    }

    .project-item:hover .project-details {
        background: transparent;
        padding-bottom: 25px;
    }

    .project-item:hover .project-details h3 {
        border-bottom-color: white;
    }



    /* ========================================================
MODAL STYLING (Project Detail View)
======================================================== */
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: rgba(0, 0, 0, 0.85);
        opacity: 0;
        transition: opacity var(--transition-speed) ease;
    }

    .modal.is-open {
        display: block;
        opacity: 1;
    }

    .modal-content {
        background-color: var(--bg-light);
        margin: 3% auto;
        padding: 30px 40px;
        border-radius: var(--radius);
        width: 95%;
        max-width: 1000px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        position: relative;
        transform: scale(0.9);
        transition: transform var(--transition-speed) ease, opacity var(--transition-speed) ease;
        opacity: 0;
        max-height: 94vh;
        overflow-y: auto;
    }

    .modal.is-open .modal-content {
        transform: scale(1);
        opacity: 1;
    }

    .modal-content h2 {
        color: var(--brand-primary);
        font-size: 2.2em;
        margin-top: 0;
        border-bottom: 3px solid var(--brand-accent);
        padding-bottom: 10px;
        margin-bottom: 25px;
        font-weight: 700;
    }

    /* FIXED: Close button styling */
    .modal-content .close-btn {
        color: var(--brand-primary);
        position: absolute;
        top: 15px;
        right: 25px;
        font-size: 30px;
        /* Made it large and clickable */
        font-weight: 300;
        cursor: pointer;
        transition: color 0.2s, transform 0.2s;
        padding: 0;
        line-height: 1;
    }

    .modal-content .close-btn:hover,
    .modal-content .close-btn:focus {
        color: var(--brand-accent);
        transform: rotate(90deg);
        outline: none;
    }

    /* NEW GALLERY STYLES */
    
    .modal-main-image,
    .modal-main-video {
        width: 100%;
        height: auto;
        object-fit:contain;
        border-radius: var(--radius);
        margin-bottom: 20px;
        border: 1px solid #ddd;
        transition: opacity 0.15s ease;
    }

    /* Ensure video element uses the correct constraints */
    .modal-main-video {
        max-height: 80vh;
        /* Set a max height relative to viewport for large screens */
        min-height: 300px;
        background-color: black;
    }

    .thumbnail-container {
        display: flex;
        gap: 10px;
        overflow-x: auto;
        padding-bottom: 10px;
        margin-bottom: 30px;
        justify-content: center;
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .thumbnail-container::-webkit-scrollbar {
        display: none;
    }

    .thumbnail-container img {
        width: 80px;
        height: 60px;
        object-fit: cover;
        border-radius: var(--radius);
        cursor: pointer;
        opacity: 0.6;
        transition: opacity 0.3s, transform 0.2s, border 0.3s;
        border: 2px solid transparent;
        flex-shrink: 0;
    }

    .thumbnail-container img:hover {
        opacity: 1;
        transform: scale(1.05);
    }

    .thumbnail-container img.active {
        opacity: 1;
        border-color: var(--brand-accent);
        transform: scale(1);
    }

    .modal-info p {
        margin-bottom: 20px;
        font-size: 1.05em;
        line-height: 1.7;
        text-align: justify;
    }

    .modal-sector {
        font-weight: 700;
        color: var(--brand-accent);
        text-transform: uppercase;
        letter-spacing: 1px;
        display: block;
        margin-bottom: 10px;
        font-size: 0.9em;
    }

    .modal-info strong {
        color: var(--brand-primary);
    }

    /* ========================================================
BACK TO TOP BUTTON STYLING (New Feature)
======================================================== */
    #backToTopBtn {
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        bottom: 25px;
        right: 25px;
        z-index: 99;
        width: 50px;
        height: 50px;
        background-color: var(--brand-primary);
        color: white;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        outline: none;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        font-size: 20px;
        transition: opacity 0.3s, background-color 0.3s, transform 0.3s, visibility 0.3s;
        opacity: 0;
        visibility: hidden;
    }

    #backToTopBtn.show {
        opacity: 1;
        visibility: visible;
    }

    #backToTopBtn:hover {
        background-color: var(--brand-accent);
        transform: translateY(-2px);
    }

    /* ========================================================
NEW: FLOATING CONTACT BUTTON STYLING (Blended & Actionable)
======================================================== */
    #contactUsBtn {
        position: fixed;
        bottom: 90px;
        right: 25px;
        z-index: 99;
        background-color: var(--brand-primary);
        color: white;
        text-decoration: none;
        padding: 12px 18px;
        border-radius: 50px;
        font-weight: 600;
        font-size: 1em;
        display: flex;
        align-items: center;
        gap: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        transition: background-color 0.3s, transform 0.3s, opacity 0.3s;
        opacity: 0.85;
    }

    #contactUsBtn:hover {
        background-color: var(--brand-accent);
        transform: translateY(-2px) scale(1.05);
        opacity: 1;
        box-shadow: 0 6px 15px rgba(255, 122, 0, 0.4);
    }

    @media (max-width: 768px) {
        #contactUsBtn {
            bottom: 75px;
            right: 20px;
            padding: 10px 15px;
            font-size: 0.9em;
        }
    }

    /* ========================================================
Responsive Design
======================================================== */
    @media (max-width: 768px) {
        .section-title {
            font-size: 2em;
        }

        .project-grid {
            grid-template-columns: 1fr;
        }

        .project-details {
            min-height: 60px;
            padding: 15px;
        }

        .project-details h3 {
            font-size: 1.2em
        }

        .modal-content {
            margin: 0;
            padding: 20px;
            width: 100%;
            max-height: 100vh;
            border-radius: 0;
        }

        .modal-content h2 {
            font-size: 1.8em;
        }

        nav ul {
            display: none;
        }

        nav {
            justify-content: center;
        }

        .portfolio-filters {
            margin-bottom: 30px;
        }

        .filter-btn {
            padding: 8px 15px;
            font-size: 0.9em;
        }

        #projectSearch {
            max-width: 100%;
        }

        #backToTopBtn {
            width: 45px;
            height: 45px;
            bottom: 20px;
            right: 20px;
            font-size: 18px;
        }

    }

    ;
</style>

</head>

<body>

    <div id="watermark-bg"></div>

    <header>
        <div class="container">
            <div class="topbar">
                <div class="brand">
                    <a href="index.html" class="logo">G</a>
                    <div>
                        <div class="brand-title">Gabekile Projects</div>
                        <small class="brand-tagline">
                            General Building â€¢ Civil â€¢ Mechanical â€¢ Electrical â€¢ Project Management
                        </small>
                    </div>
                </div>

                <button class="menu-toggle" id="menu-toggle" aria-expanded="false" aria-controls="navbar-menu">
                    <span class="sr-only">Toggle navigation</span>
                    <i class="fas fa-bars"></i>
                </button>

                <nav id="navbar">
                    <ul id="navbar-menu">
                        <li><a href="index.html#about">About</a></li>
                        <li><a href="index.html#services">Services</a></li>
                        <li><a href="#portfolio-section">Projects</a></li>
                        <li><a href="index.html#team">Team</a></li>
                        <li><a href="index.html#affiliation">Affiliations</a></li>
                        <li><a href="index.html#contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <section id="portfolio-section">
            <div class="container">
                <h2 class="section-title">Comprehensive Project Portfolio</h2>
                <p class="section-intro">From foundational civil works to advanced mechanical installations, explore our
                    diverse track record of successful projects.</p>

                <div id="featuredProjectBanner" class="featured-banner" data-id="mgt-reno">
                    <div class="featured-content">
                        <span class="featured-tag">FEATURED PROJECT</span>
                        <h2>MGT Headquarter Renovation</h2>
                        <p>A comprehensive structural refurbishment and extension showcasing our full-scope building
                            expertise.</p>
                        <button class="view-details-btn" data-project-id="mgt-reno">View Full Details <i
                                class="fas fa-arrow-right"></i></button>
                    </div>
                </div>


                <div class="portfolio-controls">
                    <input type="text" id="projectSearch" placeholder="ðŸ” Search projects (title, sector, timeline...)">

                    <div class="portfolio-filters" role="group" aria-label="Project Filters">
                        <button class="filter-btn active" data-filter="all" aria-pressed="true">All Sectors</button>
                        <button class="filter-btn" data-filter="civil" aria-pressed="false">Civil Engineering</button>
                        <button class="filter-btn" data-filter="general" aria-pressed="false">General Building</button>
                        <button class="filter-btn" data-filter="mechanical" aria-pressed="false">Mechanical</button>
                        <button class="filter-btn" data-filter="electrical" aria-pressed="false">Electrical</button>
                        <button class="filter-btn" data-filter="residential" aria-pressed="false">Residential</button>
                        <button class="filter-btn" data-filter="infrastructure"
                            aria-pressed="false">Infrastructure</button>
                    </div>
                </div>

                <div class="project-grid" id="project-grid" role="region" aria-live="polite">

                    <div class="project-item" data-category="general" data-id="mgt-reno">
                        <img src="images/1.jpg" alt="MGT headquarters renovations">
                        <div class="project-details">
                            <h3>MGT Headquarter Renovation</h3>
                            <p class="project-description">MGT headquarters renovation and extension works...</p>
                        </div>
                    </div>

                    <div class="project-item" data-category="civil" data-id="mpumalanga-pv">
                        <img src="images/Parliamentary/Parliamentary2.JPG" alt="Parliamentary village civil works">
                        <div class="project-details">
                            <h3>Mpumalanga Parliamentary Village</h3>
                            <p class="project-description">Works supervision for the Mpumalanga parliamentary village...
                            </p>
                        </div>
                    </div>

                    <div class="project-item" data-category="general" data-id="mapulaneng-hospital">
                        <img src="images/Mapulaneng/Mapulaneng1.jpg" alt="Hospital construction site">
                        <div class="project-details">
                            <h3>New Mapulaneng Hospital Supervision</h3>
                            <p class="project-description">Supervision of New Mapulaneng Hospital works...</p>
                        </div>
                    </div>

                    <div class="project-item" data-category="general residential" data-id="tanzania-res">
                        <img src="images/Tanzania/Tanzania1.jpg" alt="Residential construction in Tanzania">
                        <div class="project-details">
                            <h3>Tanzania Residential Projects</h3>
                            <p class="project-description">Residential project management and construction works...</p>
                        </div>
                    </div>

                    <div class="project-item" data-category="mechanical" data-id="jma-steel">
                        <img src="images/JMA/JMA1.jpg" alt="Structural steel in factory">
                        <div class="project-details">
                            <h3>JMA Structural Steel Works</h3>
                            <p class="project-description">Structural steel fabrication and installation works...</p>
                        </div>
                    </div>

                    <div class="project-item" data-category="electrical" data-id="mccain-foods">
                        <img src="images/Mcain/Mcain1.jpg" alt="Factory electrical works">
                        <div class="project-details">
                            <h3>McCain Foods Works Supervision</h3>
                            <p class="project-description">Works supervision and shutdown construction works...</p>
                        </div>
                    </div>

                    <div class="project-item" data-category="residential general" data-id="nyambi-residence">
                        <img src="images/Nyambi/Nyambi1.jpg" alt="Nyambi Residence placeholder">
                        <div class="project-details">
                            <h3>Nyambi Residence</h3>
                            <p class="project-description">Complete construction of a private luxury residence...</p>
                        </div>
                    </div>

                    <div class="project-item" data-category="residential general" data-id="mbatsane-residence">
                        <img src="images/Mbatsane/Mbatsane1.jpg" alt="Mbatsane Residence placeholder">
                        <div class="project-details">
                            <h3>Mbatsane Residence</h3>
                            <p class="project-description">Residential renovation and extension project...</p>
                        </div>
                    </div>

                    <div class="project-item" data-category="civil infrastructure" data-id="brt-wonderboom">
                        <img src="images/electrical.jpg"
                            alt="BRT Wonderboom Supervision placeholder">
                        <div class="project-details">
                            <h3>BRT Wonderboom Supervision</h3>
                            <p class="project-description">Supervision of the Bus Rapid Transit infrastructure works...
                            </p>
                        </div>
                    </div>

                    <div class="project-item" data-category="infrastructure" data-id="guest house">
                        <img src="images/Zenzele/Zenzele1.jpg" alt="Future infrastructure project">
                        <div class="project-details">
                            <h3>Zenzele Guest house</h3>
                            <p class="project-description">Large-scale water treatment facility upgrade...</p>
                        </div>
                    </div>

                    <div class="project-item" data-category="civil residential" data-id="Kamau residence">
                        <img src="images/Kamau/Kamau1.jpg" alt="Kamau residence">
                        <div class="project-details">
                            <h3>Kamau Residence</h3>
                            <p class="project-description">Residential project management and construction works...</p>
                        </div>
                    </div>

                    <div class="project-item" data-category="civil residential" data-id="Masher Residence">
                        <img src="images/Masher/Masher1.jpg" alt="Future infrastructure project">
                        <div class="project-details">
                            <h3>Masher Residence</h3>
                            <p class="project-description">A luxury residential development entering the planning
                                stage...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="projectModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-content">
            <span class="close-btn" tabindex="0" role="button" aria-label="Close Project Details">&times;</span>

            <div id="modalGallery">
                <img id="modalMainImage" class="modal-main-image" src="" alt="Project main image">
                <div id="thumbnailContainer" class="thumbnail-container">
                </div>
            </div>
            <div class="modal-info">
                <span id="modalSector" class="modal-sector"></span>
                <h2 id="modalTitle"></h2>

                <p id="modalDescription"></p>

                <p><strong>Timeline:</strong> <span id="modalTimeline"></span></p>
            </div>
        </div>
    </div>

    <button id="backToTopBtn" title="Go to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <footer
        style="background: var(--brand-primary); color: white; text-align: center; padding: 20px 0; font-size: 0.9em;">
        <div class="container">
            &copy; 2025 Gabekile Projects. All Rights Reserved.
        </div>
    </footer>

    <a id="contactUsBtn" href="index.html#contact" title="Contact Us for a Quote">
        <i class="fas fa-headset"></i> Contact Us
    </a>


</body>


<script>
    // ========================================================
    // PROJECT DATA STORAGE (for Modal)
    // ========================================================
    const projectData = {
        'mgt-reno': {
            title: "MGT Headquarter Renovation",
            sector: "General Building",
            timeline: "Mar 2023 - Dec 2024",
            images: [
                { src: "images/1.jpg", alt: "MGT Renovation - Final Completion (After)" },
                { src: "images/2.jpg", alt: "MGT Renovation - Mid-Phase Construction" },
                { src: "images/3.jpg", alt: "MGT Renovation - Phase 1 Initial Work (Before)" }
            ],
            description: "This comprehensive project involved the renovation and extension of the MGT headquarters. Key deliverables included structural refurbishments, high-quality interior and exterior finishes, and intricate site coordination to ensure minimal disruption to ongoing operations. The project was completed on schedule and met all modern building standards."
        },
        'mpumalanga-pv': {
            title: "Mpumalanga Parliamentary Village",
            sector: "Civil Engineering",
            timeline: "Jan 2024 - Current",
            images: [
                { src: "images/Parliamentary/Parliamentary1.JPG", alt: "Parliamentary Village - Current Progress" },
                { src: "images/Parliamentary/parliamentary2.jpg", alt: "Parliamentary Village - Foundations" }
            ],
            description: "Our role involves works supervision for the Mpumalanga parliamentary village. This includes overseeing all civil and general building works, ensuring strict adherence to the project schedule, quality control standards, and regulatory compliance. We act as the client's representative on site."
        },
        'mapulaneng-hospital': {
            title: "New Mapulaneng Hospital Supervision",
            sector: "General Building",
            timeline: "Sep 2022 - Current",
            images: [
                { src: "images/Mapulaneng/Mapulaneng1.jpg", alt: "Hospital Construction Site - Current View" },
                { src: "images/Mapulaneng/Mapulaneng2.jpg", alt: "Hospital Initial Excavation" },
                { src: "images/Mapulaneng/Mapulaneng3.jpg", alt: "Hospital Initial Excavation" },
                { src: "images/Mapulaneng/Mapulaneng4.jpg", alt: "Hospital Initial Excavation" }

            ],
            description: "We are providing crucial supervision services for the construction of the New Mapulaneng Hospital. Our responsibilities cover coordination between various contractors, rigorous quality control checks at every stage, and timely snag attendance to ensure the facility meets the highest standards before handover."
        },
        'tanzania-res': {
            title: "Tanzania Residential Projects",
            sector: "Residential / General Building",
            timeline: "Jan 2021 - Dec 2023",
            images: [
                { src: "images/Tanzania/Tanzania1.jpg", alt: "Residential Construction - Completed" },
                { src: "images/Tanzania/Tanzania2.jpg", alt: "Residential Construction - Completed" },
                { src: "images/Tanzania/Tanzania3.jpg", alt: "Residential Construction" },
                { src: "images/Tanzania/Tanzania4.jpg", alt: "Residential Construction" },
                { src: "images/Tanzania/Tanzania5.jpg", alt: "Residential Construction" },
                { src: "images/Tanzania/Tanzania6.jpg", alt: "Residential Construction" }
            ],
            description: "A series of residential project management and construction works carried out across various sites in Tanzania. Our scope covered the entire lifecycle, from initial planning and procurement through structural construction, finishes, and final completion and client handover."
        },
        'jma-steel': {
            title: "JMA Structural Steel Works",
            sector: "Mechanical",
            timeline: "Feb 2025 - Jun 2025",
            images: [
                { src: "images/JMA/JMA1.jpg", alt: "Structural Steel - Erection Complete" },
                { src: "images/JMA/JMA2.jpg", alt: "Structural Steel" },
                { src: "images/JMA/JMA3.jpg", alt: "Structural Steel" },
                { src: "images/JMA/JMA4.jpg", alt: "Structural Steel" },
                { src: "images/JMA/JMA5.jpg", alt: "Structural Steel" },
                { src: "images/JMA/JMA6.jpg", alt: "Structural Steel" },
                { src: "images/JMA/JMA7.jpg", alt: "Structural Steel" },
                { src: "images/JMA/JMA8.jpg", alt: "Structural Steel" },
                { src: "images/JMA/JMA9.jpg", alt: "Structural Steel" },
                { src: "images/JMA/JMA10.jpg", alt: "Structural Steel" },
                { src: "images/JMA/JMA11.jpg", alt: "Structural Steel" },
            ],
            description: "Execution of structural steel fabrication and installation works for key JMA industrial projects. This mechanical scope involved detailed engineering, precision fabrication off-site, and safe, efficient erection on-site, ensuring structural integrity and compliance with design specifications."
        },
        'mccain-foods': {
            title: "McCain Foods Works Supervision",
            sector: "Electrical",
            timeline: "Jul 2025 - Current",
            images: [
                { src: "images/MCain/Mcain1.jpg", alt: "Factory Electrical Panel Upgrade" },
                { src: "images/MCain/Mcain2.jpg", alt: "Factory Electrical Panel Upgrade" },
                { src: "images/MCain/Mcain3.jpg", alt: "Factory Electrical Panel Upgrade" },
                { src: "images/MCain/Mcain4.jpg", alt: "Factory Electrical Panel Upgrade" },
                { src: "images/MCain/Mcain5.jpg", alt: "Factory Electrical Panel Upgrade" },
                { src: "images/MCain/Mcain6.jpg", alt: "Factory Electrical Panel Upgrade" },
                { src: "images/MCain/Mcain7.jpg", alt: "Factory Electrical Panel Upgrade" },
                { src: "images/MCain/Mcain8.jpg", alt: "Factory Electrical Panel Upgrade" },
            ],
            description: "Provision of works supervision services, specializing in electrical and shutdown construction works for McCain Foods (South Africa). Our focus is on managing high-risk shutdown logistics, ensuring safety, and coordinating electrical contractors to minimize downtime."
        },
        'nyambi-residence': {
            title: "Nyambi Residence",
            sector: "Residential / General Building",
            timeline: "Feb 2019 â€“ Jun 2020",
            images: [
                { src: "images/Nyambi/Nyambi1.jpg", alt: "Nyambi Residence - Completed Renovation" },
                { src: "images/Nyambi/Nyambi2.jpg", alt: "Nyambi Residence" },
                { src: "images/Nyambi/Nyambi3.jpg", alt: "Nyambi Residence" },
                { src: "images/Nyambi/Nyambi4.jpg", alt: "Nyambi Residence" },
                { src: "images/Nyambi/Nyambi5.jpg", alt: "Nyambi Residence" }
            ],
            description: "Complete construction of a private luxury residence. We handled the entire project, from pouring the foundation and managing all sub-contractors to ensuring final finishes and client handover, demonstrating robust project management."
        },
        'mbatsane-residence': {
            title: "Mbatsane Residence",
            sector: "Residential / General Building",
            timeline: "Feb 2021 â€“ Apr 2022",
            images: [
                { src: "images/Mbatsane/Mbatsane1.jpg", alt: "Mbatsane Residence - Completed Renovation" },
                { src: "images/Mbatsane/Mbatsane2.jpg", alt: "Mbatsane Residence" },
                { src: "images/Mbatsane/Mbatsane3.jpg", alt: "Mbatsane Residence" },
                { src: "images/Mbatsane/Mbatsane4.jpg", alt: "Mbatsane Residence" },
            ],
            description: "A significant residential renovation and extension project. The focus included structural upgrades, aesthetic modernization of the existing dwelling, and seamless integration of the new extension to meet the client's expanded living requirements."
        },
        'brt-wonderboom': {
            title: "BRT Wonderboom Supervision",
            sector: "Civil / Infrastructure",
            timeline: "Apr 2021 â€“ Aug 2022",
            images: [
                { src: "images/electrical.jpg", alt: "BRT Wonderboom - Station Progress" }
            ],
            description: "Supervision and quality assurance for the Bus Rapid Transit (BRT) infrastructure works at the Wonderboom station. This involved monitoring civil works, ensuring adherence to public transport quality standards, and overall site compliance."
        },
        // Merged 'Zenzele Guest House' and 'guest house' into one consistent ID
        'guest house': {
            title: "Zenzele Guest house",
            sector: "Infrastructure",
            timeline: "Planning Stage",
            images: [
                { src: "images/Zenzele/Zenzele1.jpg", alt: "Zenzele Guest House - Conceptual Design" },
                { src: "images/Zenzele/Zenzele2.mp4", alt: "Zenzele Guest House (Video)" }
            ],
            description: "Currently in the planning and tender stage, this project is a large-scale water treatment facility upgrade designed to significantly boost capacity and support the regional population's growth and environmental needs. It represents a critical infrastructure investment."
        },
        'Kamau residence': {
            title: "Kamau Residence",
            sector: "Residential / General Building",
            timeline: "Planning Stage",
            images: [
                { src: "images/Kamau/Kamau1.jpg", alt: "Kamau residence - Conceptual Design" },
                { src: "images/Kamau/Kamau2.jpg", alt: "Kamau residence" },
                { src: "images/Kamau/Kamau3.jpg", alt: "Kamau residence" },
                { src: "images/Kamau/Kamau4.jpg", alt: "Kamau residence" },
                { src: "images/Kamau/Kamau5.jpg", alt: "Kamau residence" },
                { src: "images/Kamau/Kamau6.jpg", alt: "Kamau residence" },
                { src: "images/Kamau/Kamau7.jpg", alt: "Kamau residence" }
            ],
            description: "This is a proposed high-end residential project currently in the planning phase, involving comprehensive design and preliminary civil works. The focus is on a sustainable and modern family dwelling."
        },
        'Masher Residence': {
            title: "Masher Residence",
            sector: "Residential / General Building",
            timeline: "Planning Stage",
            images: [
                { src: "images/Masher/Masher1.jpg", alt: "Masher residence - Conceptual Design" },
                { src: "images/Masher/Masher2.jpg", alt: "Masher residence" },
                { src: "images/Masher/Masher3.jpg", alt: "Masher residence" },
                { src: "images/Masher/Masher4.jpg", alt: "Masher residence" },
                { src: "images/Masher/Masher5.jpg", alt: "Masher residence" },
                { src: "images/Masher/Masher6.jpg", alt: "Masher residence" }
            ],
            description: "A luxury residential development entering the planning stage. The scope includes full construction management, integrating civil and general building expertise for a bespoke, client-driven design."
        }
    };


    // ========================================================
    // PORTFOLIO FILTER & MODAL LOGIC
    // ========================================================
    document.addEventListener('DOMContentLoaded', () => {
        const filterButtons = document.querySelectorAll('.filter-btn');
        const projectItems = document.querySelectorAll('.project-item');
        const projectSearch = document.getElementById('projectSearch');

        

        // Modal elements
        const modal = document.getElementById('projectModal');
        const closeBtn = document.querySelector('.close-btn');
        const modalTitle = document.getElementById('modalTitle');
        const modalSector = document.getElementById('modalSector');
        const modalTimeline = document.getElementById('modalTimeline');
        const modalMainImage = document.getElementById('modalMainImage');
        const thumbnailContainer = document.getElementById('thumbnailContainer');
        const modalDescription = document.getElementById('modalDescription');

        // Navigation elements
        const menuToggle = document.getElementById('menu-toggle');
        const navbar = document.getElementById('navbar');


        // General elements
        const body = document.body;
        const header = document.querySelector('header');
        const backToTopBtn = document.getElementById('backToTopBtn');
        const SCROLL_THRESHOLD = 300;


        // Add simple transition CSS via JS for filtering animation
        projectItems.forEach(item => {
            item.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
        });

        // --- Helper Functions ---

        const renderGallery = (images) => {
            const mediaContainer = document.getElementById('modalGallery');
            thumbnailContainer.innerHTML = '';

            // 1. Remove old main media elements to ensure only one is present
            const existingMainMedia = mediaContainer.querySelector('.modal-main-image, .modal-main-video');
            if (existingMainMedia) {
                existingMainMedia.remove();
            }

            // Function to create and insert the main media element (Image or Muted Video)
            const displayMainMedia = (media) => {
                let mainMedia;

                if (media.src.endsWith('.mp4')) {
                    // Create a video element for MP4 files
                    mainMedia = document.createElement('video');
                    mainMedia.classList.add('modal-main-video');
                    mainMedia.setAttribute('controls', '');
                    mainMedia.setAttribute('autoplay', '');
                    mainMedia.setAttribute('loop', ''); // Loop for continuous play
                    mainMedia.setAttribute('muted', ''); // MUTE IS ADDED HERE
                    mainMedia.src = media.src;
                    mainMedia.alt = media.alt;
                } else {
                    // Create an image element for images
                    mainMedia = document.createElement('img');
                    mainMedia.classList.add('modal-main-image');
                    mainMedia.src = media.src;
                    mainMedia.alt = media.alt;
                }

                // Insert the new main media element before the thumbnail container
                mediaContainer.prepend(mainMedia);
            };

            // Display the first item if it exists
            if (images && images.length > 0) {
                displayMainMedia(images[0]);
            }


            // 2. Thumbnail Generation Logic
            images.forEach((media, index) => {
                const isVideo = media.src.endsWith('.mp4');
                const thumbnail = document.createElement(isVideo ? 'div' : 'img');
                thumbnail.classList.add('thumbnail');

                if (isVideo) {
                    // Placeholder for video thumbnail
                    // Assuming Font Awesome is linked, this shows a video icon
                    thumbnail.innerHTML = `<i class="fas fa-video"></i> Video`;
                    thumbnail.style.cssText = 'display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: #333; color: white; font-size: 10px; height: 60px; width: 80px;';
                } else {
                    // Image thumbnail
                    thumbnail.src = media.src;
                    thumbnail.alt = media.alt;
                }

                if (index === 0) {
                    thumbnail.classList.add('active');
                }

                thumbnail.addEventListener('click', () => {
                    // Remove existing active media element (to switch between image/video)
                    const currentMainMedia = mediaContainer.querySelector('.modal-main-image, .modal-main-video');
                    if (currentMainMedia) currentMainMedia.remove();

                    // Display the newly selected media
                    displayMainMedia(media);

                    // Update active state
                    document.querySelectorAll('.thumbnail-container > *').forEach(t => t.classList.remove('active'));
                    thumbnail.classList.add('active');
                });

                thumbnailContainer.appendChild(thumbnail);
            });
        };

        const openModal = (projectId) => {
            const data = projectData[projectId];

            if (data) {
                modalTitle.textContent = data.title;
                modalSector.textContent = data.sector;
                modalTimeline.textContent = data.timeline;
                modalDescription.textContent = data.description;
                renderGallery(data.images || []);

                modal.classList.add('is-open');
                body.classList.add('no-scroll');

                // Focus on the close button for accessibility
                closeBtn.focus();

                window.location.hash = `project=${projectId}`;
            }
        };

        const closeModal = () => {
            modal.classList.remove('is-open');
            body.classList.remove('no-scroll');

            // Clear only the project hash on closing the modal
            const currentHash = window.location.hash.substring(1);
            const newHashParts = currentHash.split('&').filter(h => !h.startsWith('project='));

            if (newHashParts.length > 0) {
                window.location.hash = newHashParts.join('&');
            } else if (currentHash.includes('project=')) {
                // If only project hash was present, clear the hash entirely
                history.pushState("", document.title, window.location.pathname + window.location.search);
            }
        };

        const applyFilter = (newFilter) => {
            const searchTerm = projectSearch.value.toLowerCase().trim();
            let currentFilter = newFilter || document.querySelector('.filter-btn.active')?.getAttribute('data-filter') || 'all';

            // Update button active state
            filterButtons.forEach(btn => {
                const filter = btn.getAttribute('data-filter');
                const isActive = filter === currentFilter;
                btn.classList.toggle('active', isActive);
                btn.setAttribute('aria-pressed', isActive); // Set ARIA state
            });

            // If a new filter was provided, make it the current filter
            if (newFilter) currentFilter = newFilter;


            // Filter items
            projectItems.forEach(item => {
                const categories = item.getAttribute('data-category').toLowerCase().split(/\s+/);
                const projectId = item.getAttribute('data-id');
                const itemData = projectData[projectId];

                if (!itemData) {
                    item.style.display = 'none';
                    return;
                }
                // The rest of your applyFilter function continues here...
                // Combine all searchable text (added title for robust search)
                const itemText = (itemData.title + ' ' + itemData.sector + ' ' + itemData.timeline + ' ' + itemData.description + ' ' + categories.join(' ')).toLowerCase();

                // Check both filter and search term
                const matchesFilter = currentFilter === 'all' || categories.includes(currentFilter.toLowerCase());
                const matchesSearch = !searchTerm || itemText.includes(searchTerm);

                const matches = matchesFilter && matchesSearch;

                if (matches) {
                    item.style.display = 'block';
                    setTimeout(() => {
                        item.style.opacity = '1';
                        item.style.transform = 'scale(1)';
                    }, 50);
                } else {
                    item.style.opacity = '0';
                    item.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        item.style.display = 'none';
                    }, 300);
                }
            });

            // Update hash for shareability (maintaining simplicity)
            const currentHash = window.location.hash.substring(1);
            const otherParams = currentHash.split('&').filter(h => !h.startsWith('filter=') && h.length > 1).join('&');

            let newHash = otherParams;
            if (currentFilter !== 'all') {
                newHash = (otherParams ? otherParams + '&' : '') + `filter=${currentFilter}`;
            }

            if (newHash) {
                window.location.hash = newHash;
            } else {
                history.pushState("", document.title, window.location.pathname + window.location.search);
            }
        };

        // --- URL Hash Handler ---

        const handleHash = () => {
            const hash = window.location.hash.substring(1);
            const params = new URLSearchParams(hash.replace(/&/g, ',').replace(/=/g, '='));

            const projectId = params.get('project');
            const filterValue = params.get('filter');

            if (projectId && projectData.hasOwnProperty(projectId)) {
                openModal(projectId);
            } else if (modal.classList.contains('is-open')) {
                closeModal(); // Close modal if project ID is invalid
            }

            if (filterValue) {
                applyFilter(filterValue);
            } else {
                // If no filter in hash, ensure 'all' is visually active
                const activeFilterButton = document.querySelector('.filter-btn.active')?.getAttribute('data-filter');
                if (activeFilterButton !== 'all') {
                    applyFilter('all');
                }
            }
        };


        // --- Event Listeners ---

        // 1. SCROLL LOGIC & HEADER SHRINK
        const handleScroll = () => {
            const scrollY = window.scrollY || document.documentElement.scrollTop;

            header.classList.toggle('scrolled', scrollY > 50);

            if (scrollY > SCROLL_THRESHOLD) {
                backToTopBtn.classList.add('show');
            } else {
                backToTopBtn.classList.remove('show');
            }
        };
        const throttle = (func, limit) => {
            let inThrottle;
            return function () {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            }
        }
        window.addEventListener('scroll', throttle(handleScroll, 100));
        handleScroll();


        // 2. MOBILE MENU TOGGLE
        menuToggle.addEventListener('click', () => {
            const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';

            // Toggle classes
            navbar.classList.toggle('is-open');
            body.classList.toggle('no-scroll');

            // Update ARIA attributes
            menuToggle.setAttribute('aria-expanded', !isExpanded);
        });

        // 3. FILTER LOGIC
        filterButtons.forEach(button => {
            button.addEventListener('click', function () {
                // The filter value from the button's data attribute is passed
                applyFilter(this.getAttribute('data-filter'));
            });
        });

        // 4. LIVE SEARCH LOGIC
        projectSearch.addEventListener('input', () => {
            // Apply filter using the currently active button (which now includes the search term)
            applyFilter();
        });


        // 5. MODAL OPEN LOGIC
        projectItems.forEach(item => {
            item.addEventListener('click', function () {
                const projectId = this.getAttribute('data-id');
                openModal(projectId);
            });
        });

        // 6. MODAL CLOSE EVENTS
        closeBtn.addEventListener('click', closeModal);
        closeBtn.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                closeModal();
                e.preventDefault();
            }
        });
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('is-open')) {
                closeModal();
            }
        });

        // Featured Banner Click
        const viewDetailsBtn = document.querySelector('.featured-banner .view-details-btn');
        const featuredProjectId = viewDetailsBtn?.getAttribute('data-project-id');

        if (viewDetailsBtn && featuredProjectId) {
            viewDetailsBtn.addEventListener('click', function () {
                openModal(featuredProjectId);
            });
        }

        // 7. BACK TO TOP BUTTON
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });


        // 8. INITIAL & HISTORY HASH HANDLERS
        window.addEventListener('hashchange', handleHash);

        // Close mobile menu when a nav link is clicked (UX improvement)
        navbar.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                if (navbar.classList.contains('is-open')) {
                    navbar.classList.remove('is-open');
                    body.classList.remove('no-scroll');
                    menuToggle.setAttribute('aria-expanded', 'false');
                }
            });
        });

        handleHash(); // Run once on load to check the initial URL
    });


</script>

</script>
</body>

</html>